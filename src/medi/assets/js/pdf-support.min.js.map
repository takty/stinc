{"version":3,"sources":["assets/js/pdf-support.js"],"names":["wp","media","view","AttachmentFilters","Uploaded","prototype","createFilters","type","this","model","get","types","settings","mimeTypes","uid","window","userSettings","parseInt","text","l10n","options","controller","_state","filters","all","wpinc_medi_pdf_support","label_image","props","uploadedTo","orderby","order","priority","image_pdf","label_image_pdf","uploaded","uploadedToThisPost","post","id","unattached","status","allMediaItems","author","mine","Modal","on","jQuery","find","click","html","label_featured_image","attr","parent","trigger","featuredImage","frame"],"mappings":"AAQMA,GAAGC,QAERD,GAAGC,MAAMC,KAAKC,kBAAkBC,SAASC,UAAUC,cAAgB,WAClE,MAAMC,EAAQC,KAAKC,MAAMC,IAAI,QACvBC,EAAQX,GAAGC,MAAMC,KAAKU,SAASC,UAC/BC,EAAQC,OAAOC,aAAeC,SAASF,OAAOC,aAAaF,IAAK,IAAM,EAC5E,IAAII,EAEAP,GAASJ,IAAMW,EAAOP,EAAMJ,IAChC,MAAMY,EAAOnB,GAAGC,MAAMC,KAAKiB,KAEY,mBAAnCX,KAAKY,QAAQC,WAAWC,OAC3Bd,KAAKe,QAAU,CACdC,IAAK,CACJN,KAAUO,uBAAuBC,YACjCC,MAAU,CAAEpB,KAAM,QAASqB,WAAY,KAAMC,QAAS,OAAQC,MAAO,QACrEC,SAAU,IAEXC,UAAW,CACVd,KAAUO,uBAAuBQ,gBACjCN,MAAU,CAAEpB,KAAM,YAAaqB,WAAY,KAAMC,QAAS,OAAQC,MAAO,QACzEC,SAAU,IAEXG,SAAU,CACThB,KAAUC,EAAKgB,mBACfR,MAAU,CAAEpB,KAAM,YAAaqB,WAAY5B,GAAGC,MAAMC,KAAKU,SAASwB,KAAKC,GAAIR,QAAS,YAAaC,MAAO,OACxGC,SAAU,IAEXO,WAAY,CACXpB,KAAUC,EAAKmB,WACfX,MAAU,CAAEY,OAAQ,KAAMX,WAAY,EAAGrB,KAAM,KAAMsB,QAAS,YAAaC,MAAO,OAClFC,SAAU,KAIZvB,KAAKe,QAAU,CACdC,IAAK,CACJN,KAAUA,GAAQC,EAAKqB,cACvBb,MAAU,CAAEC,WAAY,KAAMC,QAAS,OAAQC,MAAO,OAAQW,OAAQ,MACtEV,SAAU,IAEXG,SAAU,CACThB,KAAUC,EAAKgB,mBACfR,MAAU,CAAEC,WAAY5B,GAAGC,MAAMC,KAAKU,SAASwB,KAAKC,GAAIR,QAAS,YAAaC,MAAO,MAAOW,OAAQ,MACpGV,SAAU,IAEXO,WAAY,CACXpB,KAAUC,EAAKmB,WACfX,MAAU,CAAEC,WAAY,EAAGC,QAAS,YAAaC,MAAO,MAAOW,OAAQ,MACvEV,SAAU,KAITjB,IACHN,KAAKe,QAAQmB,KAAO,CACnBxB,KAAUC,EAAKuB,KACff,MAAU,CAAEE,QAAS,OAAQC,MAAO,OAAQW,OAAQ3B,GACpDiB,SAAU,IAGb,EAEA/B,GAAGC,MAAMC,KAAKyC,MAAMtC,UAAUuC,GAAG,QAAQ,WACxCC,OAAO,gBAAgBC,KAAK,qBAAqBC,OAAM,WAClDF,OAAOrC,MAAMwC,SAAWvB,uBAAuBwB,sBAClDJ,OAAO,iDACLK,KAAK,YAAY,GACjBC,SACAC,QAAQ,SAEZ,GACD,IAEApD,GAAGC,MAAMoD,cAAcC,QAAQV,GAAG,QAAQ,WAEzCC,OAAO,iDACLK,KAAK,YAAY,GACjBC,SACAC,QAAQ,SACX","file":"assets/js/pdf-support.min.js","sourcesContent":["/**\n * PDF Support\n *\n * @author Takuto Yanagida\n * @version 2022-01-30\n */\n\n(() => {\n\tif (!wp.media) return;\n\n\twp.media.view.AttachmentFilters.Uploaded.prototype.createFilters = function () {\n\t\tconst type  = this.model.get('type');\n\t\tconst types = wp.media.view.settings.mimeTypes;\n\t\tconst uid   = window.userSettings ? parseInt(window.userSettings.uid, 10) : 0;\n\t\tlet text;\n\n\t\tif (types && type) text = types[type];\n\t\tconst l10n = wp.media.view.l10n;\n\n\t\tif (this.options.controller._state === 'featured-image') {\n\t\t\tthis.filters = {\n\t\t\t\tall: {  // Images (Default)\n\t\t\t\t\ttext    : wpinc_medi_pdf_support.label_image,\n\t\t\t\t\tprops   : { type: 'image', uploadedTo: null, orderby: 'date', order: 'DESC' },\n\t\t\t\t\tpriority: 10\n\t\t\t\t},\n\t\t\t\timage_pdf: {\n\t\t\t\t\ttext    : wpinc_medi_pdf_support.label_image_pdf,\n\t\t\t\t\tprops   : { type: 'image_pdf', uploadedTo: null, orderby: 'date', order: 'DESC' },\n\t\t\t\t\tpriority: 20\n\t\t\t\t},\n\t\t\t\tuploaded: {\n\t\t\t\t\ttext    : l10n.uploadedToThisPost,\n\t\t\t\t\tprops   : { type: 'image_pdf', uploadedTo: wp.media.view.settings.post.id, orderby: 'menuOrder', order: 'ASC' },\n\t\t\t\t\tpriority: 30\n\t\t\t\t},\n\t\t\t\tunattached: {\n\t\t\t\t\ttext    : l10n.unattached,\n\t\t\t\t\tprops   : { status: null, uploadedTo: 0, type: null, orderby: 'menuOrder', order: 'ASC' },\n\t\t\t\t\tpriority: 50\n\t\t\t\t},\n\t\t\t};\n\t\t} else {\n\t\t\tthis.filters = {\n\t\t\t\tall: {\n\t\t\t\t\ttext    : text || l10n.allMediaItems,\n\t\t\t\t\tprops   : { uploadedTo: null, orderby: 'date', order: 'DESC', author: null },\n\t\t\t\t\tpriority: 10\n\t\t\t\t},\n\t\t\t\tuploaded: {\n\t\t\t\t\ttext    : l10n.uploadedToThisPost,\n\t\t\t\t\tprops   : { uploadedTo: wp.media.view.settings.post.id, orderby: 'menuOrder', order: 'ASC', author: null },\n\t\t\t\t\tpriority: 20\n\t\t\t\t},\n\t\t\t\tunattached: {\n\t\t\t\t\ttext    : l10n.unattached,\n\t\t\t\t\tprops   : { uploadedTo: 0, orderby: 'menuOrder', order: 'ASC', author: null },\n\t\t\t\t\tpriority: 50\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tif (uid) {\n\t\t\tthis.filters.mine = {\n\t\t\t\ttext    : l10n.mine,\n\t\t\t\tprops   : { orderby: 'date', order: 'DESC', author: uid },\n\t\t\t\tpriority: 50\n\t\t\t};\n\t\t}\n\t};\n\n\twp.media.view.Modal.prototype.on('open', function () {\n\t\tjQuery('.media-modal').find('a.media-menu-item').click(function () {\n\t\t\tif (jQuery(this).html() === wpinc_medi_pdf_support.label_featured_image) {\n\t\t\t\tjQuery('select.attachment-filters option[value=\"all\"]')\n\t\t\t\t\t.attr('selected', true)\n\t\t\t\t\t.parent()\n\t\t\t\t\t.trigger('change');\n\t\t\t}\n\t\t});\n\t});\n\n\twp.media.featuredImage.frame().on('open', function () {\n\t\t// Change the default view to \"Uploaded to this post\".\n\t\tjQuery('select.attachment-filters option[value=\"all\"]')\n\t\t\t.attr('selected', true)\n\t\t\t.parent()\n\t\t\t.trigger('change');\n\t});\n})();\n"]}