{"version":3,"sources":["assets/js/ip-restriction.js"],"names":["data","useSelect","coreData","useEntityProp","plugins","registerPlugin","element","createElement","el","components","CheckboxControl","editPost","PluginPostStatusInfo","wp","meta_keys","wpinc_ip_restriction","labels","MetaField","meta_key","label","pt","s","getCurrentPostType","meta","setMeta","checked","onChange","v","k","updateMeta","render","_","zip","map"],"mappings":"AAOA,MACC,MACCA,MAAYC,UAAEA,GACdC,UAAYC,cAAEA,GACdC,SAAYC,eAAEA,GACdC,SAAcC,cAAeC,GAC7BC,YAAYC,gBAAEA,GACdC,UAAYC,qBAAEA,IACXC,GAEEC,EAAYC,qBAAqBD,WAAa,CAAC,mBAC/CE,EAAYD,qBAAqBC,QAAa,CAAC,kBAE/CC,EAAY,EAAGC,WAAUC,YAC9B,MAAMC,EAAkBnB,GAAUoB,GAAKA,EAAE,eAAeC,sBAAsB,KACvEC,EAAMC,GAAWrB,EAAc,WAAYiB,EAAI,QAGtD,OAAOZ,EAAGE,EAAiB,CAC1BS,QACAM,QAAUF,EAAKL,GACfQ,SAAUC,GALa,EAACC,EAAGD,IAAMH,EAAQ,IAAKD,EAAMK,CAACA,GAAKD,GAAQ,OAKnDE,CAAWX,EAAUS,IAHrC,EAaDtB,EAAe,uBAAwB,CAAEyB,OAN1B,IAAMtB,EACpBI,EACA,CAAA,EACAmB,EAAEC,IAAIlB,EAAWE,GAAQiB,KAAI,EAAEf,EAAUC,KAAWX,EAAGS,EAAW,CAAEC,WAAUC,cA5BhF,EAAA","file":"assets\\js\\ip-restriction.min.js","sourcesContent":["/**\n * IP Restriction Plugin\n *\n * @author Takuto Yanagida\n * @version 2022-02-27\n */\n\n(() => {\n\tconst {\n\t\tdata      : { useSelect },\n\t\tcoreData  : { useEntityProp },\n\t\tplugins   : { registerPlugin },\n\t\telement   : { createElement: el },\n\t\tcomponents: { CheckboxControl },\n\t\teditPost  : { PluginPostStatusInfo },\n\t} = wp;\n\n\tconst meta_keys = wpinc_ip_restriction.meta_keys ?? ['_ip_restriction'];\n\tconst labels    = wpinc_ip_restriction.labels    ?? ['IP Restriction'];\n\n\tconst MetaField = ({ meta_key, label }) => {\n\t\tconst pt              = useSelect(s => s('core/editor').getCurrentPostType(), []);\n\t\tconst [meta, setMeta] = useEntityProp('postType', pt, 'meta');\n\t\tconst updateMeta      = (k, v) => setMeta({ ...meta, [k]: (v ? v : null) });\n\n\t\treturn el(CheckboxControl, {\n\t\t\tlabel,\n\t\t\tchecked : meta[meta_key],\n\t\t\tonChange: v => updateMeta(meta_key, v),\n\t\t});\n\t};\n\n\tconst render = () => el(\n\t\tPluginPostStatusInfo,\n\t\t{},\n\t\t_.zip(meta_keys, labels).map(([meta_key, label]) => el(MetaField, { meta_key, label }))\n\t);\n\n\tregisterPlugin('wpinc-ip-restriction', { render });\n})();\n"]}