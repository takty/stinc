{"version":3,"sources":["assets/js/sticky.js"],"names":["data","useSelect","coreData","useEntityProp","plugins","registerPlugin","element","createElement","el","Fragment","components","CheckboxControl","editPost","PluginPostStatusInfo","wp","meta_keys","wpinc_sticky","labels","MetaField","meta_key","label","pt","s","getCurrentPostType","meta","setMeta","checked","onChange","v","k","updateMeta","render","_","zip","map"],"mappings":"AAOC,MACA,MACCA,MAAYC,UAAEA,GACdC,UAAYC,cAAEA,GACdC,SAAYC,eAAEA,GACdC,SAAcC,cAAeC,EAAjBC,SAAqBA,GACjCC,YAAYC,gBAAEA,GACdC,UAAYC,qBAAEA,IACXC,GAEEC,EAAYC,aAAaD,WAAa,CAAC,WACvCE,EAAYD,aAAaC,QAAa,CAAC,8BAEvCC,EAAY,EAAGC,WAAUC,YAC9B,MAAMC,EAAkBpB,GAAUqB,GAAKA,EAAE,eAAeC,sBAAsB,KACvEC,EAAMC,GAAWtB,EAAc,WAAYkB,EAAI,QAGtD,OAAOb,EAAGG,EAAiB,CAC1BS,QACAM,QAAUF,EAAKL,GACfQ,SAAUC,GALa,EAACC,EAAGD,IAAMH,EAAQ,IAAKD,EAAMK,CAACA,GAAKD,GAAQ,OAKnDE,CAAWX,EAAUS,IAHrC,EAsBDvB,EAAe,eAAgB,CAAE0B,OAflB,IAAMvB,EACpBC,EACA,CAAA,EACAuB,EAAEC,IAAIlB,EAAWE,GAAQiB,KACxB,EAAEf,EAAUC,KAAWZ,EACtBK,EACA,CAAA,EACAL,EACCU,EACA,CAAEC,WAAUC,eAlChB,EAAA","file":"assets\\js\\sticky.min.js","sourcesContent":["/**\n * Sticky Plugin\n *\n * @author Takuto Yanagida\n * @version 2022-06-08\n */\n\n (() => {\n\tconst {\n\t\tdata      : { useSelect },\n\t\tcoreData  : { useEntityProp },\n\t\tplugins   : { registerPlugin },\n\t\telement   : { createElement: el, Fragment },\n\t\tcomponents: { CheckboxControl },\n\t\teditPost  : { PluginPostStatusInfo },\n\t} = wp;\n\n\tconst meta_keys = wpinc_sticky.meta_keys ?? ['_sticky'];\n\tconst labels    = wpinc_sticky.labels    ?? ['Stick this post at the top'];\n\n\tconst MetaField = ({ meta_key, label }) => {\n\t\tconst pt              = useSelect(s => s('core/editor').getCurrentPostType(), []);\n\t\tconst [meta, setMeta] = useEntityProp('postType', pt, 'meta');\n\t\tconst updateMeta      = (k, v) => setMeta({ ...meta, [k]: (v ? v : null) });\n\n\t\treturn el(CheckboxControl, {\n\t\t\tlabel,\n\t\t\tchecked : meta[meta_key],\n\t\t\tonChange: v => updateMeta(meta_key, v),\n\t\t});\n\t};\n\n\tconst render = () => el(\n\t\tFragment,\n\t\t{},\n\t\t_.zip(meta_keys, labels).map(\n\t\t\t([meta_key, label]) => el(\n\t\t\t\tPluginPostStatusInfo,\n\t\t\t\t{},\n\t\t\t\tel (\n\t\t\t\t\tMetaField,\n\t\t\t\t\t{ meta_key, label }\n\t\t\t\t)\n\t\t\t)\n\t\t)\n\t);\n\n\tregisterPlugin('wpinc-sticky', { render });\n})();\n"]}