function setMediaPicker(e,t=null,n=null,i={}){null===t&&(t="media"),i=Object.assign({multiple:!1,type:"",parentGen:1,title:null},i);const l=document.getElementById("post_ID").value;let o=null;function r(e,t,n){a(e,t+"-id",n.id),a(e,t+"-url",n.url),a(e,t+"-title",n.title),a(e,t+"-filename",n.filename)}function a(e,t,n){const i=e.getElementsByClassName(t);for(let e=0;e<i.length;e+=1)i[e]instanceof HTMLInputElement?i[e].value=n:i[e].innerText=n}e.addEventListener("click",(function(e){e.preventDefault(),o||(wp.media.view.AttachmentsBrowser=p,o=function(e,t,n,i){wp.media.model.settings.post.id=e,wp.media.view.settings.post.id=e;const l=wp.media({title:t,library:{type:i},frame:"select",multiple:n});return l.uploader.options.uploader.params.post_id=e,l}(l,null===i.title?e.target.innerText:i.title,i.multiple,i.type),o.on("select",(function(){const l=function(e,t){for(;0<t--&&e.parentNode;)e=e.parentNode;return e}(e.target,i.parentGen);if(i.multiple){const i=o.state().get("selection").map((e=>e.toJSON()));r(l,t,i[0]),n&&n(e.target,i)}else{const i=o.state().get("selection").first().toJSON();r(l,t,i),n&&n(e.target,i)}})),i.media_id_input&&o.on("open",(()=>{const e=o.state().get("selection"),t=document.getElementById(i.media_id_input).value,n=wp.media.attachment(t);n.fetch(),e.add(n?[n]:[])})),o.on("close",(function(){wp.media.view.AttachmentsBrowser=s}))),o.open()}));const d=wp.media.view.AttachmentFilters.extend({createFilters:function(){const e={};e.all={text:wp.media.view.l10n.allMediaItems,props:{status:null,type:null,uploadedTo:null,orderby:"date",order:"DESC"},priority:10},e.uploaded={text:wp.media.view.l10n.uploadedToThisPost,props:{status:null,type:null,uploadedTo:wp.media.view.settings.post.id,orderby:"menuOrder",order:"ASC"},priority:20},e.unattached={text:wp.media.view.l10n.unattached,props:{status:null,type:null,uploadedTo:0,orderby:"menuOrder",order:"ASC"},priority:50},this.filters=e}}),s=wp.media.view.AttachmentsBrowser,p=s.extend({createToolbar:function(){s.prototype.createToolbar.call(this),this.toolbar.set("mediaLibraryUploadedFilter",new d({controller:this.controller,model:this.collection.props,priority:-100}).render())}})}document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll('*[data-picker="media"]');for(let t=0;t<e.length;t+=1)setMediaPicker(e[t])}));