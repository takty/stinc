{"version":3,"sources":["assets/js/single-media-picker.js"],"names":["wpinc_single_media_picker_init","key","body","document","querySelector","add_row","getElementsByClassName","add_btn","item","set_item","it","f","value","id","url","title","filename","innerText","style","display","del_btn","sel_btn","opener","on_clicked","t","m","addEventListener","window","open","wpinc","dia","setMediaPicker","multiple","assign_event_listener"],"mappings":"AAOA,SAASA,+BAA+BC,GACvC,MAAMC,EAAUC,SAASC,cAAe,kCAAiCH,KACnEI,EAAUH,EAAKI,uBAAuB,WAAW,GACjDC,EAAUF,EAAQD,cAAc,eAEhCI,EAAON,EAAKI,uBAAuB,QAAQ,GAejD,SAASG,EAASC,EAAIC,GACrBD,EAAGN,cAAe,WAAUH,cAAgBW,MAAWD,EAAEE,GACzDH,EAAGN,cAAe,WAAUH,YAAcW,MAAaD,EAAEG,IACzDJ,EAAGN,cAAe,WAAUH,cAAgBW,MAAWD,EAAEI,MACzDL,EAAGN,cAAe,WAAUH,iBAAmBW,MAAQD,EAAEK,SACzDN,EAAGJ,uBAAuB,YAAY,GAAGW,UAAaN,EAAEK,QACzD,CAnBIR,EAAKJ,cAAe,WAAUH,cAAgBW,OACjDJ,EAAKU,MAAMC,QAAa,GACxBd,EAAQa,MAAMC,QAAU,SAExBX,EAAKU,MAAMC,QAAa,OACxBd,EAAQa,MAAMC,QAAU,IAgBzB,SAA+BT,GAC9B,MAAMU,EAAUV,EAAGJ,uBAAuB,UAAU,GAC9Ce,EAAUX,EAAGJ,uBAAuB,UAAU,GAC9CgB,EAAUZ,EAAGJ,uBAAuB,UAAU,GAWpD,SAASiB,EAAWC,EAAGC,GACtBhB,EAASC,EAAIe,GACbf,EAAGQ,MAAMC,QAAa,GACtBd,EAAQa,MAAMC,QAAU,MACzB,CAbAC,EAAQM,iBAAiB,SAAS,KACjCjB,EAASC,EAAI,CAAEG,GAAI,GAAIC,IAAK,GAAIC,MAAO,GAAIC,SAAU,KACrDN,EAAGQ,MAAMC,QAAa,OACtBd,EAAQa,MAAMC,QAAU,EAAE,IAE3BG,EAAOI,iBAAiB,SAAS,KAChC,MAAMZ,EAAMJ,EAAGN,cAAe,WAAUH,YAAcW,MAClDE,GAAKa,OAAOC,KAAKd,EAAI,IAO1Ba,OAAOE,MAAMC,IAAIC,eAAeV,GAAS,EAAOE,EAAY,CAAES,UAAU,EAAOjB,MAAOM,EAAQJ,YAC9FU,OAAOE,MAAMC,IAAIC,eAAexB,GAAS,EAAOgB,EAAY,CAAES,UAAU,EAAOjB,MAAOR,EAAQU,WAC/F,CAnCAgB,CAAsBzB,EAoCvB","file":"assets\\js\\single-media-picker.min.js","sourcesContent":["/**\n * Single Media Picker\n *\n * @author Takuto Yanagida\n * @version 2022-02-03\n */\n\nfunction wpinc_single_media_picker_init(key) {\n\tconst body    = document.querySelector(`.wpinc-dia-single-media-picker#${key}`);\n\tconst add_row = body.getElementsByClassName('add_row')[0];\n\tconst add_btn = add_row.querySelector('.button.add');\n\n\tconst item = body.getElementsByClassName('item')[0];\n\n\tif (item.querySelector(`*[name='${key}[media]']`).value) {\n\t\titem.style.display    = '';\n\t\tadd_row.style.display = 'none';\n\t} else {\n\t\titem.style.display    = 'none';\n\t\tadd_row.style.display = '';\n\t}\n\tassign_event_listener(item);\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tfunction set_item(it, f) {\n\t\tit.querySelector(`*[name='${key}[media]']`).value    = f.id;\n\t\tit.querySelector(`*[name='${key}[url]']`).value      = f.url;\n\t\tit.querySelector(`*[name='${key}[title]']`).value    = f.title;\n\t\tit.querySelector(`*[name='${key}[filename]']`).value = f.filename;\n\t\tit.getElementsByClassName('filename')[0].innerText  = f.filename;\n\t}\n\n\tfunction assign_event_listener(it) {\n\t\tconst del_btn = it.getElementsByClassName('delete')[0];\n\t\tconst sel_btn = it.getElementsByClassName('select')[0];\n\t\tconst opener  = it.getElementsByClassName('opener')[0];\n\n\t\tdel_btn.addEventListener('click', () => {\n\t\t\tset_item(it, { id: '', url: '', title: '', filename: '' });\n\t\t\tit.style.display    = 'none';\n\t\t\tadd_row.style.display = '';\n\t\t});\n\t\topener.addEventListener('click', () => {\n\t\t\tconst url = it.querySelector(`*[name='${key}[url]']`).value;\n\t\t\tif (url) window.open(url);\n\t\t});\n\t\tfunction on_clicked(t, m) {\n\t\t\tset_item(it, m);\n\t\t\tit.style.display    = '';\n\t\t\tadd_row.style.display = 'none';\n\t\t}\n\t\twindow.wpinc.dia.setMediaPicker(sel_btn, false, on_clicked, { multiple: false, title: sel_btn.innerText });\n\t\twindow.wpinc.dia.setMediaPicker(add_btn, false, on_clicked, { multiple: false, title: add_btn.innerText });\n\t}\n}\n"]}