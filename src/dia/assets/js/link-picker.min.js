function wpinc_link_picker_init(e,t=!1,l=null,n=!1,s=null){const a=document.querySelector(`.wpinc-dia-link-picker#${e}`),i=a.getElementsByClassName("add-row")[0],r=i.querySelector(".button.add"),o=a.getElementsByClassName("table")[0],c=o.getElementsByClassName("item"),d=o.querySelector(".item-template"),u={isInternalOnly:t,isLinkTargetAllowed:n,postType:s};jQuery(o).sortable(),jQuery(o).sortable("option",{axis:"y",containment:"parent",cursor:"move",handle:".handle",items:"> .item",placeholder:"item-placeholder",update:m}),m();for(const e of c)k(e);function m(){for(let t=0;t<c.length;t+=1){const l=c[t].querySelectorAll("*[data-key]");for(const n of l){const l=n.dataset.key;n.name=`${e}[${t}][${l}]`}}}function y(e,l){e.querySelector("*[data-key='url']").value=l.url,e.querySelector("*[data-key='title']").value=l.title,t&&(e.querySelector("*[data-key='url']").readOnly=!0)}function k(e){const t=e.getElementsByClassName("delete")[0],l=e.getElementsByClassName("select")[0],n=e.getElementsByClassName("opener")[0];t.addEventListener("click",(t=>{t.target.checked?e.classList.add("is-deleted"):e.classList.remove("is-deleted")})),n.addEventListener("click",(()=>{const t=e.querySelector("*[data-key='url']").value;t&&window.open(t)})),window.wpinc.dia.setLinkPicker(l,!1,((t,l)=>y(e,l)),Object.assign(u,{title:l.innerText}))}l&&l<=c.length&&r.setAttribute("disabled","true"),window.wpinc.dia.setLinkPicker(r,!1,((e,t)=>{!function(e){const t=d.cloneNode(!0);y(t,e),t.classList.remove("item-template"),t.classList.add("item"),o.insertBefore(t,i),k(t)}(t),m(),l&&l<=c.length&&r.setAttribute("disabled","true")}),Object.assign(u,{title:r.innerText}))}