{"version":3,"sources":["assets/js/block-unregistration.js"],"names":["wp","domReady","types","window","wpinc_blok_unregistration","categories","type_variations","type_styles","origTypes","blocks","getBlockTypes","origTypeNames","Set","t","add","name","has","unregisterBlockType","cs","category","vs","Object","entries","all","getBlockVariations","a","match","unregisterBlockVariation","ss","s","unregisterBlockStyle","containNot","v","startsWith","substring"],"mappings":"AAOAA,GAAGC,UAAS,WACX,MAAMC,EAAkBC,QAAQC,2BAA2BF,OAAmB,GACxEG,EAAkBF,QAAQC,2BAA2BC,YAAmB,GACxEC,EAAkBH,QAAQC,2BAA2BE,iBAAmB,GACxEC,EAAkBJ,QAAQC,2BAA2BG,aAAmB,GAExEC,EAAgBR,GAAGS,OAAOC,gBAC1BC,EAAgB,IAAIC,IAC1B,IAAK,MAAMC,KAAKL,EACfG,EAAcG,IAAID,EAAEE,MAGrB,IAAK,MAAMF,KAAKX,EACXS,EAAcK,IAAIH,EAAEE,OACvBf,GAAGS,OAAOQ,oBAAoBJ,GAGhC,MAAMK,EAAK,IAAIN,IAAIP,GACnB,IAAK,MAAMQ,KAAKL,EACXU,EAAGF,IAAIH,EAAEM,WACZnB,GAAGS,OAAOQ,oBAAoBJ,EAAEE,MAGlC,IAAK,MAAOF,EAAGO,KAAOC,OAAOC,QAAQhB,GAAkB,CACtD,MAAMiB,EAAMvB,GAAGS,OAAOe,mBAAmBX,GACzC,IAAK,MAAMY,KAAKF,EACXG,EAAMD,EAAEV,KAAMK,IACjBpB,GAAGS,OAAOkB,yBAAyBd,EAAGY,EAAEV,MAI3C,IAAK,MAAOF,EAAGe,KAAOP,OAAOC,QAAQf,GACpC,IAAK,MAAMsB,KAAKD,EACf5B,GAAGS,OAAOqB,qBAAqBjB,EAAGgB,GAIpC,SAASH,EAAMb,EAAGO,GACjB,IAAIM,GAAQ,EACRK,GAAa,EACjB,IAAK,MAAMC,KAAKZ,EACf,GAAIY,EAAEC,WAAW,KAAM,CACtB,GAAID,EAAEE,UAAU,KAAOrB,EAAG,OAAO,EACjCkB,GAAa,OAETC,IAAMnB,IAAGa,GAAQ,GAGvB,OAAOA,GAASK","file":"assets\\js\\block-unregistration.min.js","sourcesContent":["/**\n * Block Unregistration\n *\n * @author Takuto Yanagida\n * @version 2022-06-28\n */\n\nwp.domReady(function () {\n\tconst types           = window?.wpinc_blok_unregistration?.types           ?? [];\n\tconst categories      = window?.wpinc_blok_unregistration?.categories      ?? [];\n\tconst type_variations = window?.wpinc_blok_unregistration?.type_variations ?? {};\n\tconst type_styles     = window?.wpinc_blok_unregistration?.type_styles     ?? {};\n\n\tconst origTypes     = wp.blocks.getBlockTypes();\n\tconst origTypeNames = new Set();\n\tfor (const t of origTypes) {\n\t\torigTypeNames.add(t.name);\n\t}\n\n\tfor (const t of types) {\n\t\tif (origTypeNames.has(t.name)) {\n\t\t\twp.blocks.unregisterBlockType(t);\n\t\t}\n\t}\n\tconst cs = new Set(categories);\n\tfor (const t of origTypes) {\n\t\tif (cs.has(t.category)) {\n\t\t\twp.blocks.unregisterBlockType(t.name);\n\t\t}\n\t}\n\tfor (const [t, vs] of Object.entries(type_variations)) {\n\t\tconst all = wp.blocks.getBlockVariations(t);\n\t\tfor (const a of all) {\n\t\t\tif (match(a.name, vs)) {\n\t\t\t\twp.blocks.unregisterBlockVariation(t, a.name);\n\t\t\t}\n\t\t}\n\t}\n\tfor (const [t, ss] of Object.entries(type_styles)) {\n\t\tfor (const s of ss) {\n\t\t\twp.blocks.unregisterBlockStyle(t, s);\n\t\t}\n\t}\n\n\tfunction match(t, vs) {\n\t\tlet match = false;\n\t\tlet containNot = false;\n\t\tfor (const v of vs) {\n\t\t\tif (v.startsWith('!')) {\n\t\t\t\tif (v.substring(1) === t) return false;\n\t\t\t\tcontainNot = true;\n\t\t\t} else {\n\t\t\t\tif (v === t) match = true;\n\t\t\t}\n\t\t}\n\t\treturn match || containNot;\n\t}\n});\n"]}