{"version":3,"sources":["assets/js/block-unregistration.js"],"names":["wp","domReady","types","window","wpinc_blok_unregistration","categories","type_variations","type_styles","origTypes","blocks","getBlockTypes","ts","Set","t","has","name","unregisterBlockType","cs","category","vs","Object","entries","all","getBlockVariations","a","match","unregisterBlockVariation","ss","s","unregisterBlockStyle","containNot","v","startsWith","substring"],"mappings":"AAOAA,GAAGC,UAAS,WACX,MAAMC,EAAkBC,QAAQC,2BAA2BF,OAAmB,GACxEG,EAAkBF,QAAQC,2BAA2BC,YAAmB,GACxEC,EAAkBH,QAAQC,2BAA2BE,iBAAmB,CAAA,EACxEC,EAAkBJ,QAAQC,2BAA2BG,aAAmB,CAAA,EAExEC,EAAgBR,GAAGS,OAAOC,gBAE1BC,EAAK,IAAIC,IAAIV,GACnB,IAAK,MAAMW,KAAKL,EACXG,EAAGG,IAAID,EAAEE,OACZf,GAAGS,OAAOO,oBAAoBH,EAAEE,MAGlC,MAAME,EAAK,IAAIL,IAAIP,GACnB,IAAK,MAAMQ,KAAKL,EACXS,EAAGH,IAAID,EAAEK,WACZlB,GAAGS,OAAOO,oBAAoBH,EAAEE,MAGlC,IAAK,MAAOF,EAAGM,KAAOC,OAAOC,QAAQf,GAAkB,CACtD,MAAMgB,EAAMtB,GAAGS,OAAOc,mBAAmBV,GACzC,IAAK,MAAMW,KAAKF,EACXG,EAAMD,EAAET,KAAMI,IACjBnB,GAAGS,OAAOiB,yBAAyBb,EAAGW,EAAET,KAG1C,CACD,IAAK,MAAOF,EAAGc,KAAOP,OAAOC,QAAQd,GACpC,IAAK,MAAMqB,KAAKD,EACf3B,GAAGS,OAAOoB,qBAAqBhB,EAAGe,GAIpC,SAASH,EAAMZ,EAAGM,GACjB,IAAIM,GAAQ,EACRK,GAAa,EACjB,IAAK,MAAMC,KAAKZ,EACf,GAAIY,EAAEC,WAAW,KAAM,CACtB,GAAID,EAAEE,UAAU,KAAOpB,EAAG,OAAO,EACjCiB,GAAa,CACb,MACIC,IAAMlB,IAAGY,GAAQ,GAGvB,OAAOA,GAASK,CAChB,CACD","file":"assets\\js\\block-unregistration.min.js","sourcesContent":["/**\n * Block Unregistration\n *\n * @author Takuto Yanagida\n * @version 2022-08-15\n */\n\nwp.domReady(function () {\n\tconst types           = window?.wpinc_blok_unregistration?.types           ?? [];\n\tconst categories      = window?.wpinc_blok_unregistration?.categories      ?? [];\n\tconst type_variations = window?.wpinc_blok_unregistration?.type_variations ?? {};\n\tconst type_styles     = window?.wpinc_blok_unregistration?.type_styles     ?? {};\n\n\tconst origTypes     = wp.blocks.getBlockTypes();\n\n\tconst ts = new Set(types);\n\tfor (const t of origTypes) {\n\t\tif (ts.has(t.name)) {\n\t\t\twp.blocks.unregisterBlockType(t.name);\n\t\t}\n\t}\n\tconst cs = new Set(categories);\n\tfor (const t of origTypes) {\n\t\tif (cs.has(t.category)) {\n\t\t\twp.blocks.unregisterBlockType(t.name);\n\t\t}\n\t}\n\tfor (const [t, vs] of Object.entries(type_variations)) {\n\t\tconst all = wp.blocks.getBlockVariations(t);\n\t\tfor (const a of all) {\n\t\t\tif (match(a.name, vs)) {\n\t\t\t\twp.blocks.unregisterBlockVariation(t, a.name);\n\t\t\t}\n\t\t}\n\t}\n\tfor (const [t, ss] of Object.entries(type_styles)) {\n\t\tfor (const s of ss) {\n\t\t\twp.blocks.unregisterBlockStyle(t, s);\n\t\t}\n\t}\n\n\tfunction match(t, vs) {\n\t\tlet match = false;\n\t\tlet containNot = false;\n\t\tfor (const v of vs) {\n\t\t\tif (v.startsWith('!')) {\n\t\t\t\tif (v.substring(1) === t) return false;\n\t\t\t\tcontainNot = true;\n\t\t\t} else {\n\t\t\t\tif (v === t) match = true;\n\t\t\t}\n\t\t}\n\t\treturn match || containNot;\n\t}\n});\n"]}