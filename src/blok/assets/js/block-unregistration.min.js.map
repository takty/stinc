{"version":3,"sources":["assets/js/block-unregistration.js"],"names":["wp","domReady","types","window","wpinc_blok_unregistration","categories","type_variations","type_styles","t","blocks","unregisterBlockType","cs","Set","b","getBlockTypes","has","category","name","vs","Object","entries","all","getBlockVariations","a","match","unregisterBlockVariation","ss","s","unregisterBlockStyle","containNot","v","startsWith","substring"],"mappings":"AAOAA,GAAGC,UAAS,WACX,MAAMC,EAAkBC,QAAQC,2BAA2BF,OAAS,GAC9DG,EAAkBF,QAAQC,2BAA2BC,YAAc,GACnEC,EAAkBH,QAAQC,2BAA2BE,iBAAmB,GACxEC,EAAkBJ,QAAQC,2BAA2BG,aAAe,GAE1E,IAAK,MAAMC,KAAKN,EACfF,GAAGS,OAAOC,oBAAoBF,GAE/B,MAAMG,EAAK,IAAIC,IAAIP,GACnB,IAAK,MAAMQ,KAAKb,GAAGS,OAAOK,gBACrBH,EAAGI,IAAIF,EAAEG,WACZhB,GAAGS,OAAOC,oBAAoBG,EAAEI,MAGlC,IAAK,MAAOT,EAAGU,KAAOC,OAAOC,QAAQd,GAAkB,CACtD,MAAMe,EAAMrB,GAAGS,OAAOa,mBAAmBd,GACzC,IAAK,MAAMe,KAAKF,EACXG,EAAMD,EAAEN,KAAMC,IACjBlB,GAAGS,OAAOgB,yBAAyBjB,EAAGe,EAAEN,MAI3C,IAAK,MAAOT,EAAGkB,KAAOP,OAAOC,QAAQb,GACpC,IAAK,MAAMoB,KAAKD,EACf1B,GAAGS,OAAOmB,qBAAqBpB,EAAGmB,GAIpC,SAASH,EAAMhB,EAAGU,GACjB,IAAIM,GAAQ,EACRK,GAAa,EACjB,IAAK,MAAMC,KAAKZ,EACf,GAAIY,EAAEC,WAAW,KAAM,CACtB,GAAID,EAAEE,UAAU,KAAOxB,EAAG,OAAO,EACjCqB,GAAa,OAETC,IAAMtB,IAAGgB,GAAQ,GAGvB,OAAOA,GAASK","file":"assets\\js\\block-unregistration.min.js","sourcesContent":["/**\n * Block Unregistration\n *\n * @author Takuto Yanagida\n * @version 2022-03-15\n */\n\nwp.domReady(function () {\n\tconst types           = window?.wpinc_blok_unregistration?.types ?? [];\n\tconst categories      = window?.wpinc_blok_unregistration?.categories ?? [];\n\tconst type_variations = window?.wpinc_blok_unregistration?.type_variations ?? {};\n\tconst type_styles     = window?.wpinc_blok_unregistration?.type_styles ?? {};\n\n\tfor (const t of types) {\n\t\twp.blocks.unregisterBlockType(t);\n\t}\n\tconst cs = new Set(categories);\n\tfor (const b of wp.blocks.getBlockTypes()) {\n\t\tif (cs.has(b.category)) {\n\t\t\twp.blocks.unregisterBlockType(b.name);\n\t\t}\n\t}\n\tfor (const [t, vs] of Object.entries(type_variations)) {\n\t\tconst all = wp.blocks.getBlockVariations(t);\n\t\tfor (const a of all) {\n\t\t\tif (match(a.name, vs)) {\n\t\t\t\twp.blocks.unregisterBlockVariation(t, a.name);\n\t\t\t}\n\t\t}\n\t}\n\tfor (const [t, ss] of Object.entries(type_styles)) {\n\t\tfor (const s of ss) {\n\t\t\twp.blocks.unregisterBlockStyle(t, s);\n\t\t}\n\t}\n\n\tfunction match(t, vs) {\n\t\tlet match = false;\n\t\tlet containNot = false;\n\t\tfor (const v of vs) {\n\t\t\tif (v.startsWith('!')) {\n\t\t\t\tif (v.substring(1) === t) return false;\n\t\t\t\tcontainNot = true;\n\t\t\t} else {\n\t\t\t\tif (v === t) match = true;\n\t\t\t}\n\t\t}\n\t\treturn match || containNot;\n\t}\n});\n"]}